---
title: "使用したことのないパッケージマネージャーを比較してみた"
tags: ["node", "技術"]
slug: package-manager-node
coverImage: "bun.jpg"
---

以前yarnを使用していた時はイマイチ使いづらかったり、npmが改善を重ねて速度的にも問題ない状況だったため  
開発安定性重視のため長い期間npmをメインに使用してきました。

最近では以前よりもbunが早くて安定しているという話を多く聞いたり、GitHub上のReadMeを見てもpnpmを使用する  
インストール方法がデフォルトで記載されていることも増えてきたため、現状を検証してみました。



```threadToPost
せな@
今日は比較的余裕あるしbun or pnpmするか,
せな@
bunのメリットとしてpnpm以下パケマネよりもインストールが早いところが上がるけどpnpmの最大メリットであるディスク効率化考えるとどっちがいいかって一概に言えないんだよな、とは言え最近の開発だとnode_modules増えすぎて容量足りないなんてのは見たことないしここだけ考えるとどっちでも感ある,
せな@
pnpmはpackage.json内の厳密アクセスが優位っぽいけど割とこれ系で困ることって「共有名メソッドが存在する場合の補完関連で変なの使っちゃってた〜！」くらいでそんなに困ったことないよな,
せな@
強いていうならbunはちょっとOP気味というかできる範囲が多い分install速度早めるためだけに導入して今使ってるライブラリor将来使うライブラリとの相性問題踏まないか？ってところは懸念あるんだよな,
せな@
というかゼロインストールで現状npm install  4.26s user 3.31s こんなもんだし速度優先で考える必要ないなこれ,
せな@
pnpm install  10.79s user 8.81spnpm install  2.58s user 3.54s仕様上初回はやっぱ時間かかるけど2回目以降は結構良さげだね,
せな@
これパケマネが厳密になった分直接installしてないものは再度installが必要になってちょっとめんどくさいな、Nextでvanilla-extract使う時"vanilla-extract/css"で使えてたけどpnpm経由だとちゃんと"vanilla-extract/css"をinstallしないといけなくなった,
せな@
まぁでも厳密にやんなさいよ、ってところ以外は悪くないか,
せな@
最終的に初回インストールは遅いってところは結構ネックだからローカル実行ならともかくCIだとコンテナ使い捨てであんまりメリット感じないし、よっぽど似たpackage使い回すプロジェクトが並列で走ってないならまぁええか・・・って感じだな,
せな@
そういえばローカルだとrm -r node_modules && npm installで治るタイプのキャッシュバグ偶に踏むけど、pnpmはリンク貼ってるだけとかいう記事をみるとpnpm i -f必須になるなら余計めんどくさそうな気もするな,
せな@
まぁユースケースに合うか次第なのでね,
せな@
というか最初の目的であるストレージ節約がどうでも良くなった文脈だと自分のプロジェクトでbun vs npmで速度出した方がよくないか？となったのでやってみよう,
せな@
npm install  4.39s user 3.44sbun install  1.65s user 1.43sすませんした(大声土下座),
せな@
ここはともかくnpm scriptsまでbunに置き換える理由が思いつかんな...?↓npm run typecheck  3.66s bun run build  32.47sbun run typecheck  2.10s npm run build  32.75sすごいじゃん？パッケージ内の処理多寡依存っぽいかな？,

```
